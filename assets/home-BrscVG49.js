const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/edit-DNUshoPa.js","assets/index-Djz3hU2T.js","assets/index-32nqSsNe.css","assets/edit-DiNSmR-z.css","assets/alert-CF5VuMnX.css","assets/select-Cg3B10gN.css"])))=>i.map(i=>d[i]);
import{d as M,r as b,o as Q,a as S,e,b as u,J as o,w as a,a0 as W,F as z,s as X,l as Y,a1 as Z,A as ee,a2 as te,n as h,au as ae,z as le,i as oe,v as ne,R as se,S as ie,j as de,q as re,g as ue,H as pe,Q as ce,p,a3 as me,K as _e,a4 as fe,a5 as ge,B as ve,a6 as be,av as he}from"./index-Djz3hU2T.js";/* empty css                   *//* empty css               *//* empty css                     *//* empty css                 */import{u as ye}from"./table.plugin-CUKLko4C.js";const Ce={class:"table-com-search"},we={class:"table-header ba-scroll-style"},Ve={class:"table-search"},Ee={style:{width:"100%","overflow-x":"auto"},class:"table-content"},ke={class:"table-footer"},Se={class:"table-pagination"},De=M({__name:"home",setup(ze){const x=ae(()=>he(()=>import("./edit-DNUshoPa.js"),__vite__mapDeps([0,1,2,3,4,5]))),v=b(null),y=(n={})=>{console.log(n),v.value?v.value.open({...n}):console.error("EditForm 组件未正确挂载！")},{handleSelectionChange:F,hasSelectedRows:R,isVisible:T,toggleVisibility:B,loadData:U,data:r,refreshData:m,handleSizeChange:D,handleCurrentChange:P,searchParams:C,deleteRows:w,toggleSwitch:L}=ye("/api/v1/admin/product/list"),s=b({product_name:"",product_code:"",payment_type_id:"",status:""}),V=b([]),$=async()=>{try{const n=await X({url:"/api/v1/admin/product/payment-type-list",method:"GET"});n.status&&(V.value=n.data)}catch(n){console.error("获取支付类型列表失败:",n)}},A=async()=>{C.value={...s.value},await m()},I=()=>{s.value={product_name:"",product_code:"",payment_type_id:"",status:""},C.value={...s.value},m()};Q(async()=>{await $(),U()});const N=(n,t)=>{w(n,[t.id])},j=n=>{w(n)};return(n,t)=>{const E=ie,c=se,_=ne,f=pe,k=de,G=oe,i=Y,O=ce,q=Z,d=ve,H=be,J=ee,K=te;return h(),S(z,null,[e(o(x),{ref_key:"editFormRef",ref:v,onRefresh:o(m)},null,8,["onRefresh"]),e(W,{name:"fade"},{default:a(()=>[le(u("div",Ce,[e(G,{gutter:20},{default:a(()=>[e(_,{span:6},{default:a(()=>[e(c,{label:"产品名称"},{default:a(()=>[e(E,{modelValue:s.value.product_name,"onUpdate:modelValue":t[0]||(t[0]=l=>s.value.product_name=l),placeholder:"按产品名称搜索",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(_,{span:6},{default:a(()=>[e(c,{label:"产品编号"},{default:a(()=>[e(E,{modelValue:s.value.product_code,"onUpdate:modelValue":t[1]||(t[1]=l=>s.value.product_code=l),placeholder:"按产品编号搜索",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(_,{span:6},{default:a(()=>[e(c,{label:"支付类型"},{default:a(()=>[e(k,{modelValue:s.value.payment_type_id,"onUpdate:modelValue":t[2]||(t[2]=l=>s.value.payment_type_id=l),placeholder:"选择支付类型",clearable:"",filterable:""},{default:a(()=>[(h(!0),S(z,null,re(V.value,l=>(h(),ue(f,{key:l.id,label:l.product_name,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(_,{span:6},{default:a(()=>[e(c,{label:"状态"},{default:a(()=>[e(k,{modelValue:s.value.status,"onUpdate:modelValue":t[3]||(t[3]=l=>s.value.status=l),placeholder:"选择状态",clearable:""},{default:a(()=>[e(f,{label:"全部",value:""}),e(f,{label:"启用",value:1}),e(f,{label:"禁用",value:0})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(O,{inline:!0,class:"demo-form-inline"},{default:a(()=>[e(c,null,{default:a(()=>[e(i,{type:"primary",onClick:A},{default:a(()=>[...t[7]||(t[7]=[p("搜索",-1)])]),_:1}),e(i,{type:"primary",onClick:I},{default:a(()=>[...t[8]||(t[8]=[p("重置",-1)])]),_:1})]),_:1})]),_:1})],512),[[me,o(T)]])]),_:1}),u("div",we,[e(i,{icon:o(_e),onClick:o(m),color:"#40485b"},null,8,["icon","onClick"]),e(i,{type:"primary",icon:o(fe),onClick:y},{default:a(()=>[...t[9]||(t[9]=[p("添加",-1)])]),_:1},8,["icon"]),e(i,{type:"danger",disabled:!o(R),onClick:t[4]||(t[4]=l=>j("/api/v1/admin/product/delete"))},{default:a(()=>[...t[10]||(t[10]=[p("删除",-1)])]),_:1},8,["disabled"]),u("div",Ve,[e(q,{class:"ml-4"},{default:a(()=>[e(i,{icon:o(ge),onClick:o(B)},null,8,["icon","onClick"])]),_:1})])]),u("div",Ee,[e(J,{data:o(r).data,border:"",stripe:"","max-height":"600",style:{width:"100%"},onSelectionChange:o(F)},{default:a(()=>[e(d,{type:"selection",width:"40"}),e(d,{prop:"product_name",label:"产品名称",align:"center","min-width":"200"}),e(d,{prop:"product_code",label:"产品编号",align:"center","min-width":"100"}),e(d,{prop:"payment_type.product_name",label:"支付类型",align:"center","min-width":"150"}),e(d,{label:"状态",align:"center","min-width":"90"},{default:a(({row:l})=>[e(H,{modelValue:l.status,"onUpdate:modelValue":g=>l.status=g,"active-value":1,"inactive-value":0,onChange:g=>o(L)("/api/v1/admin/product/switch",l.id)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),e(d,{prop:"created_at",label:"创建时间",align:"center","min-width":"150"}),e(d,{label:"操作",align:"center",fixed:"right","min-width":"200"},{default:a(l=>[e(i,{size:"small",onClick:g=>y(l.row)},{default:a(()=>[...t[11]||(t[11]=[p("编辑",-1)])]),_:1},8,["onClick"]),e(i,{size:"small",type:"danger",onClick:g=>N("/api/v1/admin/product/delete",l.row)},{default:a(()=>[...t[12]||(t[12]=[p("删除",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data","onSelectionChange"])]),u("div",ke,[u("div",Se,[e(K,{"current-page":o(r).current_page,"onUpdate:currentPage":t[5]||(t[5]=l=>o(r).current_page=l),"page-size":o(r).page_size,"onUpdate:pageSize":t[6]||(t[6]=l=>o(r).page_size=l),"page-sizes":[10,50,100,200],background:!0,"prev-text":"上一页","next-text":"下一页",layout:"total, sizes, prev, pager, next, jumper",total:o(r).page_total,onSizeChange:o(D),onCurrentChange:o(P)},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])])])],64)}}});export{De as default};
//# sourceMappingURL=home-BrscVG49.js.map
