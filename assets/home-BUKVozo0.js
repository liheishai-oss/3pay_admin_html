const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/edit-md9fs70A.js","assets/index-Bd9DWvNd.js","assets/index-DeES_tJc.css","assets/edit-Bjvejz2a.css","assets/select-Cg3B10gN.css"])))=>i.map(i=>d[i]);
import{d as ee,g as y,a9 as ae,L as te,c as R,a as e,e as d,u as o,w as t,T as le,M as U,s as F,q as ne,N as oe,O as se,P as ie,o as m,ao as re,Q as ue,E as de,i as C,j as T,b as ce,y as pe,ap as me,as as _e,aq as ge,z as fe,x as ve,n as c,R as ye,S as he,U as be,V as Ce,W as we,X as Ve,ar as Ee}from"./index-Bd9DWvNd.js";/* empty css                   *//* empty css               *//* empty css                     *//* empty css                 */import{u as ke}from"./table.plugin-D73d37Sk.js";const Se={class:"table-com-search"},ze={class:"table-header ba-scroll-style"},xe={class:"table-search"},Re={style:{width:"100%","overflow-x":"auto"},class:"table-content"},Ue={class:"table-footer"},Fe={class:"table-pagination"},Ae=ee({__name:"home",setup(Te){const D=re(()=>Ee(()=>import("./edit-md9fs70A.js"),__vite__mapDeps([0,1,2,3,4]))),h=y(null),w=(n={})=>{console.log(n),h.value?h.value.open({...n}):console.error("EditForm 组件未正确挂载！")},{handleSelectionChange:B,hasSelectedRows:P,isVisible:I,toggleVisibility:L,loadData:N,data:u,refreshData:_,handleSizeChange:A,handleCurrentChange:$,searchParams:V,deleteRows:E,toggleSwitch:G}=ke("/api/v1/admin/single-royalty/list"),s=y({agent_id:"",payee_name:"",payee_account:"",status:""}),k=y([]),S=y({}),b=ae(()=>{var n;return((n=S.value)==null?void 0:n.is_agent)===!0}),O=async()=>{try{const n=await F({url:"/api/v1/admin/user/info",method:"GET"});n.status&&(S.value=n.data)}catch(n){console.error("获取用户信息失败:",n)}},j=async()=>{if(!b.value)try{const n=await F({url:"/api/v1/admin/single-royalty/agent-list",method:"GET"});n.status&&(k.value=n.data)}catch(n){console.error("获取代理商列表失败:",n)}},q=async()=>{V.value={...s.value},await _()},M=()=>{s.value={agent_id:"",payee_name:"",payee_account:"",status:""},V.value={...s.value},_()};te(async()=>{await O(),await j(),N()});const Q=(n,a)=>{E(n,[a.id])},W=n=>{E(n)};return(n,a)=>{const g=ge,z=me,p=pe,f=ce,x=fe,X=de,i=ne,H=ve,J=oe,r=we,K=Ve,Y=se,Z=ie;return m(),R(U,null,[e(o(D),{ref_key:"editFormRef",ref:h,onRefresh:o(_)},null,8,["onRefresh"]),e(le,{name:"fade"},{default:t(()=>[ue(d("div",Se,[e(X,{gutter:20},{default:t(()=>[b.value?T("",!0):(m(),C(f,{key:0,span:6},{default:t(()=>[e(p,{label:"代理商"},{default:t(()=>[e(z,{modelValue:s.value.agent_id,"onUpdate:modelValue":a[0]||(a[0]=l=>s.value.agent_id=l),placeholder:"选择代理商",clearable:"",filterable:""},{default:t(()=>[(m(!0),R(U,null,_e(k.value,l=>(m(),C(g,{key:l.id,label:l.agent_name,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})),e(f,{span:6},{default:t(()=>[e(p,{label:"收款人姓名"},{default:t(()=>[e(x,{modelValue:s.value.payee_name,"onUpdate:modelValue":a[1]||(a[1]=l=>s.value.payee_name=l),placeholder:"按收款人姓名搜索",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(f,{span:6},{default:t(()=>[e(p,{label:"收款人账号"},{default:t(()=>[e(x,{modelValue:s.value.payee_account,"onUpdate:modelValue":a[2]||(a[2]=l=>s.value.payee_account=l),placeholder:"按收款人账号搜索",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(f,{span:6},{default:t(()=>[e(p,{label:"状态"},{default:t(()=>[e(z,{modelValue:s.value.status,"onUpdate:modelValue":a[3]||(a[3]=l=>s.value.status=l),placeholder:"选择状态",clearable:""},{default:t(()=>[e(g,{label:"全部",value:""}),e(g,{label:"启用",value:1}),e(g,{label:"禁用",value:0})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(H,{inline:!0,class:"demo-form-inline"},{default:t(()=>[e(p,null,{default:t(()=>[e(i,{type:"primary",onClick:q},{default:t(()=>[...a[7]||(a[7]=[c("搜索",-1)])]),_:1}),e(i,{type:"primary",onClick:M},{default:t(()=>[...a[8]||(a[8]=[c("重置",-1)])]),_:1})]),_:1})]),_:1})],512),[[ye,o(I)]])]),_:1}),d("div",ze,[e(i,{icon:o(he),onClick:o(_),color:"#40485b"},null,8,["icon","onClick"]),e(i,{type:"primary",icon:o(be),onClick:w},{default:t(()=>[...a[9]||(a[9]=[c("添加",-1)])]),_:1},8,["icon"]),e(i,{type:"danger",disabled:!o(P),onClick:a[4]||(a[4]=l=>W("/api/v1/admin/single-royalty/delete"))},{default:t(()=>[...a[10]||(a[10]=[c("删除",-1)])]),_:1},8,["disabled"]),d("div",xe,[e(J,{class:"ml-4"},{default:t(()=>[e(i,{icon:o(Ce),onClick:o(L)},null,8,["icon","onClick"])]),_:1})])]),d("div",Re,[e(Y,{data:o(u).data,border:"",stripe:"","max-height":"600",style:{width:"100%"},onSelectionChange:o(B)},{default:t(()=>[e(r,{type:"selection",width:"40"}),b.value?T("",!0):(m(),C(r,{key:0,prop:"agent.agent_name",label:"代理商",align:"center","min-width":"150"})),e(r,{prop:"payee_name",label:"收款人姓名",align:"center","min-width":"150"}),e(r,{prop:"payee_account",label:"收款人账号",align:"center","min-width":"180"}),e(r,{prop:"payee_user_id",label:"收款人用户ID",align:"center","min-width":"180"}),e(r,{label:"状态",align:"center","min-width":"90"},{default:t(({row:l})=>[e(K,{modelValue:l.status,"onUpdate:modelValue":v=>l.status=v,"active-value":1,"inactive-value":0,onChange:v=>o(G)("/api/v1/admin/single-royalty/switch",l.id)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),e(r,{prop:"created_at",label:"创建时间",align:"center","min-width":"150"}),e(r,{label:"操作",align:"center",fixed:"right","min-width":"200"},{default:t(l=>[e(i,{size:"small",onClick:v=>w(l.row)},{default:t(()=>[...a[11]||(a[11]=[c("编辑",-1)])]),_:1},8,["onClick"]),e(i,{size:"small",type:"danger",onClick:v=>Q("/api/v1/admin/single-royalty/delete",l.row)},{default:t(()=>[...a[12]||(a[12]=[c("删除",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data","onSelectionChange"])]),d("div",Ue,[d("div",Fe,[e(Z,{"current-page":o(u).current_page,"onUpdate:currentPage":a[5]||(a[5]=l=>o(u).current_page=l),"page-size":o(u).page_size,"onUpdate:pageSize":a[6]||(a[6]=l=>o(u).page_size=l),"page-sizes":[10,50,100,200],background:!0,"prev-text":"上一页","next-text":"下一页",layout:"total, sizes, prev, pager, next, jumper",total:o(u).page_total,onSizeChange:o(A),onCurrentChange:o($)},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])])])],64)}}});export{Ae as default};
//# sourceMappingURL=home-BUKVozo0.js.map
