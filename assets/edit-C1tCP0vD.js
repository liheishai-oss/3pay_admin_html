import{d as S,r as u,ap as T,g as B,w as s,U as N,s as m,E as p,n as O,e as a,J as c,Q as P,R as q,S as R,b,p as _,ab as $,a6 as j,l as A,I as D,at as Z,ao as z,_ as G}from"./index-BlNhG5G6.js";/* empty css                     */const J=S({__name:"edit",emits:["refresh"],setup(M,{expose:g,emit:V}){const n=u(!1),i=u(),t=u({id:0,product_name:"",class_name:"",description:"",status:1,sort_order:0}),y=V,w=u({product_name:[{required:!0,message:"请输入产品名称",trigger:"blur"}],class_name:[{required:!0,message:"请输入产品代码",trigger:"blur"},{pattern:/^[A-Z][a-zA-Z0-9]*$/,message:"产品代码必须以大写字母开头，只能包含字母和数字",trigger:"blur"}],sort_order:[{required:!0,message:"请输入排序值",trigger:"blur"}]}),x=async l=>{try{return(await m({url:`/api/v1/admin/payment-type/detail/${l}`,method:"GET"})).data}catch(e){console.error("获取详情失败:",e),p.error("获取详情失败")}},E=async(l={})=>{const e={...l};if(Object.assign(t.value,e),e.id>0){const o=await x(e.id);o&&Object.assign(t.value,o)}n.value=!0},k=async()=>{var e;await((e=i.value)==null?void 0:e.validate());const l={...t.value};try{let o;l.id===0?o=await m({url:"/api/v1/admin/payment-type/add",method:"POST",data:l}):o=await m({url:"/api/v1/admin/payment-type/edit",method:"POST",data:l}),o.status&&(p.success(o.message||"操作成功"),y("refresh"),n.value=!1)}catch(o){p.error(o.message||"操作失败")}},U=()=>{var l;t.value={id:0,product_name:"",class_name:"",description:"",status:1,sort_order:0},(l=i.value)==null||l.clearValidate()};return T(n,l=>{l||U()}),g({open:E}),(l,e)=>{const o=R,d=q,I=$,C=j,f=D,v=A,F=N;return O(),B(F,{modelValue:n.value,"onUpdate:modelValue":e[6]||(e[6]=r=>n.value=r),title:t.value.id===0?"新增支付类型":"编辑支付类型",width:"600px","close-on-click-modal":!1},{default:s(()=>[a(c(P),{model:t.value,"label-width":"120px",rules:w.value,ref_key:"formRef",ref:i},{default:s(()=>[a(d,{label:"产品名称",prop:"product_name"},{default:s(()=>[a(o,{modelValue:t.value.product_name,"onUpdate:modelValue":e[0]||(e[0]=r=>t.value.product_name=r),placeholder:"例如：当面付、手机网站支付",clearable:""},null,8,["modelValue"])]),_:1}),a(d,{label:"产品代码",prop:"class_name"},{default:s(()=>[a(o,{modelValue:t.value.class_name,"onUpdate:modelValue":e[1]||(e[1]=r=>t.value.class_name=r),placeholder:"例如：FaceToFacePayment、WapPayment",clearable:"",disabled:t.value.id>0},{prepend:s(()=>[...e[7]||(e[7]=[_("Code",-1)])]),_:1},8,["modelValue","disabled"]),e[8]||(e[8]=b("div",{class:"form-tip"},"必须以大写字母开头，只能包含字母和数字，创建后不可修改",-1))]),_:1}),a(d,{label:"产品描述",prop:"description"},{default:s(()=>[a(o,{modelValue:t.value.description,"onUpdate:modelValue":e[2]||(e[2]=r=>t.value.description=r),type:"textarea",rows:3,placeholder:"请输入产品描述",maxlength:"500","show-word-limit":""},null,8,["modelValue"])]),_:1}),a(d,{label:"排序权重",prop:"sort_order"},{default:s(()=>[a(I,{modelValue:t.value.sort_order,"onUpdate:modelValue":e[3]||(e[3]=r=>t.value.sort_order=r),min:0,max:9999,step:10,"controls-position":"right"},null,8,["modelValue"]),e[9]||(e[9]=b("div",{class:"form-tip"},"数值越大越靠前",-1))]),_:1}),a(d,{label:"状态",prop:"status"},{default:s(()=>[a(C,{modelValue:t.value.status,"onUpdate:modelValue":e[4]||(e[4]=r=>t.value.status=r),"active-value":1,"inactive-value":0,"active-text":"启用","inactive-text":"禁用"},null,8,["modelValue"])]),_:1}),a(d,null,{default:s(()=>[a(v,{type:"primary",onClick:k},{default:s(()=>[a(f,null,{default:s(()=>[a(c(Z))]),_:1}),e[10]||(e[10]=_(" 提交 ",-1))]),_:1}),a(v,{onClick:e[5]||(e[5]=r=>n.value=!1)},{default:s(()=>[a(f,null,{default:s(()=>[a(c(z))]),_:1}),e[11]||(e[11]=_(" 取消 ",-1))]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])}}}),H=G(J,[["__scopeId","data-v-8f2ee4bd"]]);export{H as default};
//# sourceMappingURL=edit-C1tCP0vD.js.map
