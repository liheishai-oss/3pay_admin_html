import{d as L,r as b,o as Q,a as q,e,b as r,J as t,w as l,a0 as H,F as O,l as W,a1 as X,A as Y,a2 as Z,n as ee,z as ae,x as le,Q as te,i as ne,v as oe,R as se,S as ie,p as u,I as re,a5 as C,K as V,ao as de,a3 as ue,a4 as ce,B as pe,a6 as me,_ as _e}from"./index-BeGCk70a.js";/* empty css                   *//* empty css               *//* empty css                     *//* empty css                 */import{u as fe}from"./table.plugin-ruFkGNIL.js";import{_ as ge}from"./edit.vue_vue_type_style_index_0_lang-DyocRuPX.js";/* empty css                     *//* empty css                    */const he={class:"table-com-search"},ve={class:"search-header"},be={class:"search-title"},Ce={class:"search-buttons"},we={class:"table-header ba-scroll-style"},ke={class:"table-search"},ye={style:{width:"100%","overflow-x":"auto"},class:"table-content"},xe={class:"table-footer"},Ee={class:"table-pagination"},Se=L({__name:"home",setup(Ve){const f=b(null),w=(s={})=>{console.log(s),f.value?f.value.open({...s}):console.error("ComplaintForm 组件未正确挂载！")},{handleSelectionChange:z,hasSelectedRows:k,isVisible:F,toggleVisibility:y,loadData:R,data:c,refreshData:p,handleSizeChange:U,handleCurrentChange:B,searchParams:x,deleteRows:E,toggleSwitch:D}=fe("/api/v1/admin/user/index"),d=b({nickname:"",username:""}),g=b(!1),I=async()=>{g.value=!0;try{x.value={...d.value},await p()}catch(s){console.error("搜索失败:",s),ElMessage.error("搜索失败，请重试")}finally{g.value=!1}},T=()=>{d.value={nickname:"",username:""},x.value={...d.value},p()};Q(()=>{R()});const $=(s,a)=>{E(s,[a.id])},P=s=>{E(s)};return(s,a)=>{const m=re,o=W,S=ie,h=se,v=oe,N=ne,M=te,j=le,A=X,i=pe,G=me,J=Y,K=Z;return ee(),q(O,null,[e(ge,{ref_key:"editFormRef",ref:f,onRefresh:t(p)},null,8,["onRefresh"]),e(H,{name:"fade"},{default:l(()=>[ae(r("div",he,[e(j,{class:"search-card",shadow:"never"},{header:l(()=>[r("div",ve,[r("span",be,[e(m,null,{default:l(()=>[e(t(C))]),_:1}),a[5]||(a[5]=u(" 用户搜索 ",-1))]),e(o,{type:"text",onClick:t(y),class:"close-btn"},{default:l(()=>[e(m,null,{default:l(()=>[e(t(de))]),_:1})]),_:1},8,["onClick"])])]),default:l(()=>[e(M,{model:d.value,"label-width":"100px",class:"search-form"},{default:l(()=>[e(N,{gutter:20},{default:l(()=>[e(v,{span:6},{default:l(()=>[e(h,{label:"昵称"},{default:l(()=>[e(S,{modelValue:d.value.nickname,"onUpdate:modelValue":a[0]||(a[0]=n=>d.value.nickname=n),placeholder:"请输入昵称",clearable:"","prefix-icon":"User"},null,8,["modelValue"])]),_:1})]),_:1}),e(v,{span:6},{default:l(()=>[e(h,{label:"账号"},{default:l(()=>[e(S,{modelValue:d.value.username,"onUpdate:modelValue":a[1]||(a[1]=n=>d.value.username=n),placeholder:"请输入账号",clearable:"","prefix-icon":"User"},null,8,["modelValue"])]),_:1})]),_:1}),e(v,{span:6},{default:l(()=>[e(h,null,{default:l(()=>[r("div",Ce,[e(o,{type:"primary",onClick:I,loading:g.value},{default:l(()=>[e(m,null,{default:l(()=>[e(t(C))]),_:1}),a[6]||(a[6]=u(" 搜索 ",-1))]),_:1},8,["loading"]),e(o,{onClick:T},{default:l(()=>[e(m,null,{default:l(()=>[e(t(V))]),_:1}),a[7]||(a[7]=u(" 重置 ",-1))]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})],512),[[ue,t(F)]])]),_:1}),r("div",we,[e(o,{icon:t(V),onClick:t(p),color:"#40485b"},null,8,["icon","onClick"]),e(o,{type:"primary",icon:t(ce),onClick:w},{default:l(()=>[...a[8]||(a[8]=[u("添加",-1)])]),_:1},8,["icon"]),e(o,{type:"primary",disabled:!t(k)},{default:l(()=>[...a[9]||(a[9]=[u("编辑",-1)])]),_:1},8,["disabled"]),e(o,{type:"danger",disabled:!t(k),onClick:a[2]||(a[2]=n=>P("/api/v1/admin/user/delete"))},{default:l(()=>[...a[10]||(a[10]=[u("删除",-1)])]),_:1},8,["disabled"]),r("div",ke,[e(A,{class:"ml-4"},{default:l(()=>[e(o,{icon:t(C),onClick:t(y)},null,8,["icon","onClick"])]),_:1})])]),r("div",ye,[e(J,{data:t(c).data,border:"",stripe:"","table-layout":"fixed",style:{width:"100%"},onSelectionChange:t(z)},{default:l(()=>[e(i,{type:"selection",width:"40"}),e(i,{prop:"nickname",label:"昵称",align:"center","min-width":"150"}),e(i,{prop:"username",label:"账号",align:"center","min-width":"150"}),e(i,{prop:"group.name",label:"所属分组",align:"center","min-width":"150"}),e(i,{prop:"updated_at",label:"创建时间",align:"center","min-width":"150"}),e(i,{prop:"weight",label:"权重",align:"center","min-width":"150"}),e(i,{prop:"remark",label:"备注",align:"center","min-width":"150"}),e(i,{label:"状态",align:"center","min-width":"80"},{default:l(({row:n})=>[e(G,{modelValue:n.status,"onUpdate:modelValue":_=>n.status=_,"active-value":1,"inactive-value":0,onChange:_=>t(D)("/api/v1/admin/user/switch",n.id)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),e(i,{label:"操作",align:"center",fixed:"right","min-width":"300"},{default:l(n=>[e(o,{size:"small",onClick:_=>w(n.row)},{default:l(()=>[...a[11]||(a[11]=[u("编辑",-1)])]),_:1},8,["onClick"]),e(o,{size:"small",type:"danger",onClick:_=>$("/api/v1/admin/user/delete",n.row)},{default:l(()=>[...a[12]||(a[12]=[u("删除",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data","onSelectionChange"])]),r("div",xe,[r("div",Ee,[e(K,{"current-page":t(c).current_page,"onUpdate:currentPage":a[3]||(a[3]=n=>t(c).current_page=n),"page-size":t(c).page_size,"onUpdate:pageSize":a[4]||(a[4]=n=>t(c).page_size=n),"page-sizes":[10,50,100,200],background:!0,"prev-text":"上一页","next-text":"下一页",layout:"total, sizes, prev, pager, next, jumper",total:t(c).page_total,onSizeChange:t(U),onCurrentChange:t(B)},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])])])],64)}}}),Pe=_e(Se,[["__scopeId","data-v-52100f59"]]);export{Pe as default};
//# sourceMappingURL=home-43L7l-xW.js.map
