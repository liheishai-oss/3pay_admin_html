const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/edit-Cf3_JxiD.js","assets/index-_X_07Eu8.js","assets/index-DeES_tJc.css","assets/edit-DhYuUj56.css","assets/input-number-CWqCFpc2.css"])))=>i.map(i=>d[i]);
import{d as J,g as C,a9 as K,L as Y,c as Z,a as e,e as p,u as l,w as a,T as ee,i as m,j as v,M as te,s as ae,q as le,N as ne,O as oe,P as se,o as u,ao as ie,Q as re,E as ue,b as de,y as ce,z as pe,ap as me,aq as _e,x as ge,n as d,R as fe,S as ve,U as he,V as ye,W as be,X as Ce,a8 as we,t as ke,ar as Ee}from"./index-_X_07Eu8.js";/* empty css                   *//* empty css               *//* empty css                     *//* empty css                 */import{u as Ve}from"./table.plugin-BY9GB1u6.js";const Se={class:"table-com-search"},ze={class:"table-header ba-scroll-style"},xe={class:"table-search"},Re={style:{width:"100%","overflow-x":"auto"},class:"table-content"},Fe={class:"table-footer"},Te={class:"table-pagination"},Ae=J({__name:"home",setup(De){const z=ie(()=>Ee(()=>import("./edit-Cf3_JxiD.js"),__vite__mapDeps([0,1,2,3,4]))),h=C(null),w=(o={})=>{console.log(o),h.value?h.value.open({...o}):console.error("EditForm 组件未正确挂载！")},{handleSelectionChange:x,hasSelectedRows:R,isVisible:F,toggleVisibility:T,loadData:D,data:c,refreshData:g,handleSizeChange:U,handleCurrentChange:B,searchParams:k,deleteRows:E,toggleSwitch:P}=Ve("/api/v1/admin/payment-type/list"),r=C({product_name:"",status:""}),I=async()=>{k.value={...r.value},await g()},N=()=>{r.value={product_name:"",status:""},k.value={...r.value},g()},V=C({}),_=K(()=>{var o;return((o=V.value)==null?void 0:o.is_agent)===!0}),$=async()=>{try{const o=await ae({url:"/api/v1/admin/user/info",method:"GET"});o.status&&(V.value=o.data)}catch(o){console.error("获取用户信息失败:",o)}};Y(()=>{$(),D()});const A=(o,t)=>{E(o,[t.id])},O=o=>{E(o)};return(o,t)=>{const j=pe,y=ce,S=de,b=_e,q=me,G=ue,s=le,L=ge,M=ne,i=be,Q=Ce,W=we,X=oe,H=se;return u(),Z(te,null,[e(l(z),{ref_key:"editFormRef",ref:h,onRefresh:l(g)},null,8,["onRefresh"]),e(ee,{name:"fade"},{default:a(()=>[re(p("div",Se,[e(G,{gutter:20},{default:a(()=>[e(S,{span:6},{default:a(()=>[e(y,{label:"产品名称"},{default:a(()=>[e(j,{modelValue:r.value.product_name,"onUpdate:modelValue":t[0]||(t[0]=n=>r.value.product_name=n),placeholder:"按产品名称搜索",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(S,{span:6},{default:a(()=>[e(y,{label:"状态"},{default:a(()=>[e(q,{modelValue:r.value.status,"onUpdate:modelValue":t[1]||(t[1]=n=>r.value.status=n),placeholder:"选择状态",clearable:""},{default:a(()=>[e(b,{label:"全部",value:""}),e(b,{label:"启用",value:1}),e(b,{label:"禁用",value:0})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(L,{inline:!0,class:"demo-form-inline"},{default:a(()=>[e(y,null,{default:a(()=>[e(s,{type:"primary",onClick:I},{default:a(()=>[...t[5]||(t[5]=[d("搜索",-1)])]),_:1}),e(s,{type:"primary",onClick:N},{default:a(()=>[...t[6]||(t[6]=[d("重置",-1)])]),_:1})]),_:1})]),_:1})],512),[[fe,l(F)]])]),_:1}),p("div",ze,[e(s,{icon:l(ve),onClick:l(g),color:"#40485b"},null,8,["icon","onClick"]),_.value?v("",!0):(u(),m(s,{key:0,type:"primary",icon:l(he),onClick:w},{default:a(()=>[...t[7]||(t[7]=[d("添加",-1)])]),_:1},8,["icon"])),_.value?v("",!0):(u(),m(s,{key:1,type:"danger",disabled:!l(R),onClick:t[2]||(t[2]=n=>O("/api/v1/admin/payment-type/delete"))},{default:a(()=>[...t[8]||(t[8]=[d("删除",-1)])]),_:1},8,["disabled"])),p("div",xe,[e(M,{class:"ml-4"},{default:a(()=>[e(s,{icon:l(ye),onClick:l(T)},null,8,["icon","onClick"])]),_:1})])]),p("div",Re,[e(X,{data:l(c).data,border:"",stripe:"","max-height":"600",style:{width:"100%"},onSelectionChange:l(x)},{default:a(()=>[_.value?v("",!0):(u(),m(i,{key:0,type:"selection",width:"40"})),e(i,{prop:"product_name",label:"产品名称",align:"center","min-width":"150"}),e(i,{prop:"product_code",label:"产品代码",align:"center","min-width":"180"}),e(i,{prop:"description",label:"产品描述",align:"center","min-width":"250","show-overflow-tooltip":""}),e(i,{prop:"sort_order",label:"排序",align:"center","min-width":"90"}),e(i,{label:"状态",align:"center","min-width":"90"},{default:a(({row:n})=>[_.value?(u(),m(W,{key:1,type:n.status===1?"success":"info"},{default:a(()=>[d(ke(n.status===1?"启用":"禁用"),1)]),_:2},1032,["type"])):(u(),m(Q,{key:0,modelValue:n.status,"onUpdate:modelValue":f=>n.status=f,"active-value":1,"inactive-value":0,onChange:f=>l(P)("/api/v1/admin/payment-type/switch",n.id)},null,8,["modelValue","onUpdate:modelValue","onChange"]))]),_:1}),e(i,{prop:"created_at",label:"创建时间",align:"center","min-width":"150"}),_.value?v("",!0):(u(),m(i,{key:1,label:"操作",align:"center",fixed:"right","min-width":"200"},{default:a(n=>[e(s,{size:"small",onClick:f=>w(n.row)},{default:a(()=>[...t[9]||(t[9]=[d("编辑",-1)])]),_:1},8,["onClick"]),e(s,{size:"small",type:"danger",onClick:f=>A("/api/v1/admin/payment-type/delete",n.row)},{default:a(()=>[...t[10]||(t[10]=[d("删除",-1)])]),_:1},8,["onClick"])]),_:1}))]),_:1},8,["data","onSelectionChange"])]),p("div",Fe,[p("div",Te,[e(H,{"current-page":l(c).current_page,"onUpdate:currentPage":t[3]||(t[3]=n=>l(c).current_page=n),"page-size":l(c).page_size,"onUpdate:pageSize":t[4]||(t[4]=n=>l(c).page_size=n),"page-sizes":[10,50,100,200],background:!0,"prev-text":"上一页","next-text":"下一页",layout:"total, sizes, prev, pager, next, jumper",total:l(c).page_total,onSizeChange:l(U),onCurrentChange:l(B)},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])])])],64)}}});export{Ae as default};
//# sourceMappingURL=home-BTNuiGZD.js.map
